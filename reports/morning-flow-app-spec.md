# Product Spec: Morning Flow Audio App

**Date:** February 19, 2026  
**Product Manager:** Reese  
**Status:** Draft for Review

## Problem Statement

Brian needs a hands-free, audio-guided morning movement routine that he can follow on his Apple Watch with AirPods, without looking at a screen. The routine should be dynamically generated by Rio (his AI wellbeing coach) based on his recent training activity, with calming background music and variable time options (5, 10, 15 minutes).

## Success Criteria
- [ ] Brian can start a morning flow from his Apple Watch with one tap
- [ ] Audio guidance plays through AirPods with background music
- [ ] Rio generates new sessions daily at 6:15am based on Brian's training history
- [ ] Variable duration options (5, 10, 15 minutes) available
- [ ] No screen interaction required during the flow
- [ ] MVP delivered within 24 hours

## Scope

### In Scope (MVP)
- Audio generation pipeline: Rio → ElevenLabs TTS → Audio file
- Simple delivery mechanism to Apple Watch
- 3 duration options (5, 10, 15 minutes)
- Background ambient music mixing
- Daily automated generation at 6:15am
- Apple Watch playback via AirPods

### Out of Scope
- Complex UI/UX on Apple Watch
- User accounts or authentication
- Multiple users
- Progress tracking/metrics (v2)
- Custom music selection (v2)
- Offline sync (v2)

## Technical Considerations

### Current Assets
- **OpenClaw:** Running on Mac mini (AI agent orchestration)
- **Rio:** AI wellbeing coach agent (runs daily at 6:15am)
- **ElevenLabs TTS:** Available via `sag` skill
- **Apple Ecosystem:** iPhone, Apple Watch, AirPods
- **Developer:** Brian can build custom solutions

### Content Source
- Morning flow content defined in `~/clawd/reports/morning-flow-proposal.md`
- Research-backed 10-15 minute routine with progressive overload
- Sport-specific adaptations (lifting, cycling, running)

## Architecture Options Analysis

### Option 1: Native watchOS App (SwiftUI)
**Pros:**
- Best user experience
- Direct audio playback control
- Can run independently from iPhone
- Apple Health integration potential

**Cons:**
- Development time (SwiftUI learning curve)
- App Store submission process
- Overkill for MVP

### Option 2: iPhone App + Watch Companion
**Pros:**
- Easier development than pure watchOS
- Can sync audio files to Watch
- More screen real estate for configuration

**Cons:**
- Requires iPhone nearby
- More complex than needed for MVP

### Option 3: Shortcuts-Based Approach
**Pros:**
- Zero code solution
- Can trigger from Watch
- Can play audio files
- Could work with Files app sync

**Cons:**
- Limited audio mixing capabilities
- Manual sync process
- Less reliable for daily automation

### Option 4: Web App + Watch Browser
**Pros:**
- Cross-platform
- Easy updates
- Could use Web Audio API

**Cons:**
- Watch browser limitations
- Requires internet connection
- Poor audio background playback

### Option 5: Podcast-Style RSS Feed
**Pros:**
- Extremely simple implementation
- Rio publishes daily "episode"
- Watch podcast apps support background audio
- Automatic sync via podcast apps

**Cons:**
- Limited control over playback timing
- Requires podcast app setup
- Less seamless than native app

## Recommended Architecture: Hybrid Approach

### Phase 1 (Tomorrow's MVP): Podcast RSS Feed
1. **Rio generates** daily flow script (adapting duration based on Brian's training)
2. **ElevenLabs TTS** converts to audio with calm coaching voice
3. **Background music** mixed in (royalty-free ambient track)
4. **Final audio** published as podcast episode via RSS feed
5. **Brian subscribes** in Apple Podcasts on iPhone
6. **Episode syncs** to Watch automatically
7. **Play from Watch** via Podcasts app + AirPods

**Why this works for MVP:**
- Zero app development required
- Uses existing podcast infrastructure
- Automatic Watch sync
- Background audio playback supported
- Rio can publish via simple HTTP server

### Phase 2 (Future): Native watchOS App
If the podcast approach works but has limitations, build a native app with:
- Custom audio mixing
- Progress tracking
- Apple Health integration
- Offline storage
- Better UX

## Rio Session Generation Pipeline

### Daily Process (6:15am):
```
1. Rio wakes up (OpenClaw scheduled agent)
2. Checks Brian's training history (from memory files/Apple Health)
3. Determines today's focus:
   - Recovery day → lighter flow, more mobility
   - Heavy lifting day → extra shoulder/hip focus
   - Cycling day → extra hip flexor/thoracic work
   - Running day → extra ankle/balance focus
4. Selects duration (5/10/15 min) based on time available
5. Generates script using morning-flow-proposal.md as template
6. Calls ElevenLabs TTS via `sag` skill
7. Mixes with background music (simple overlay)
8. Publishes to podcast RSS feed
9. Notifies Brian via Telegram
```

### Script Generation Logic:
```python
def generate_flow_script(duration, focus_areas):
    base_template = load_template("morning-flow-proposal.md")
    
    if duration == "5min":
        return condensed_version(base_template, focus_areas)
    elif duration == "10min":
        return standard_version(base_template, focus_areas)
    else:  # 15min
        return extended_version(base_template, focus_areas)
```

## Music Solution

### Option A: Royalty-Free Library
- **Source:** YouTube Audio Library, Epidemic Sound, Artlist
- **Pros:** Legal, high quality, diverse selection
- **Cons:** Requires curation, potential licensing fees

### Option B: AI-Generated Music
- **Source:** Mubert, AIVA, Soundraw
- **Pros:** Infinite variations, tailored to mood
- **Cons:** Quality varies, may sound "generic"

### Option C: Curated Playlist
- **Source:** Brian's existing ambient music
- **Pros:** Personal preference, known quality
- **Cons:** Limited selection, licensing unclear

### Recommendation for MVP:
Use **YouTube Audio Library** (free, no attribution required for non-commercial use). Pre-download 5-10 ambient tracks and rotate them.

## MVP Scope: Fastest Path to Working v1

### Day 1 Deliverables:
1. **Rio enhancement:** Add flow script generation capability
2. **Audio pipeline:** TTS + music mixing script
3. **Podcast server:** Simple HTTP server with RSS feed
4. **Setup instructions:** Brian subscribes on iPhone/Watch
5. **Test run:** Generate and play first episode

### Technical Components:
1. **Script generator** (Python/Node.js)
2. **TTS integration** (ElevenLabs via `sag`)
3. **Audio mixer** (FFmpeg command line)
4. **RSS feed generator** (simple XML)
5. **HTTP server** (Python `http.server` or Node.js)

### Directory Structure:
```
~/clawd/morning-flow/
├── scripts/
│   ├── generate_flow.py
│   ├── tts_to_audio.py
│   └── mix_audio.py
├── music/
│   └── ambient_tracks/
├── output/
│   └── episodes/
├── rss/
│   └── feed.xml
└── server.py
```

## Risks and Unknowns

### Technical Risks:
1. **Audio sync:** TTS timing with music may need adjustment
2. **Watch playback:** Podcast app may have limitations
3. **File size:** 15-minute audio files ~15-20MB
4. **Automation reliability:** Rio's 6:15am execution must be reliable

### Content Risks:
1. **TTS quality:** ElevenLabs may not sound "calm" enough
2. **Music selection:** May not blend well with voice
3. **Script variety:** Daily variations may feel repetitive

### User Experience Risks:
1. **Podcast app UX:** May require multiple taps to start
2. **No progress tracking:** Can't pause/resume easily
3. **Manual start:** Requires Brian to remember to play

### Mitigations:
- Test with short 5-minute episodes first
- Create 3-5 different music tracks for variety
- Add simple progress announcements ("halfway through", "one minute left")
- Consider Overcast app (better Watch experience than Apple Podcasts)

## Open Questions for Brian

1. **Music preference:** Do you have preferred ambient music or should I curate?
2. **Voice preference:** Male/female voice for TTS? Any specific ElevenLabs voice?
3. **Testing schedule:** When can we test the first generated episode?
4. **Watch setup:** Are you comfortable setting up podcast sync to Watch?
5. **Backup plan:** If podcast approach has issues, would you prefer a Shortcuts-based plan B?

## Next Steps

1. **Brian reviews** this spec and answers open questions
2. **I implement** the podcast MVP if approved
3. **Test tomorrow morning** with first generated episode
4. **Iterate** based on feedback

---

## Appendix: Detailed User Stories (if native app needed later)

### Story 1: Audio Generation Pipeline
- **Description:** Rio generates daily flow script, converts to TTS, mixes with music
- **Acceptance Criteria:**
  - [ ] Script generated by 6:15am daily
  - [ ] TTS audio created with ElevenLabs
  - [ ] Background music mixed at 30% volume
  - [ ] Final MP3 saved to episodes directory
- **Estimate:** Medium
- **Dependencies:** None

### Story 2: Podcast RSS Feed
- **Description:** Simple HTTP server with RSS feed of episodes
- **Acceptance Criteria:**
  - [ ] RSS feed includes all episodes with metadata
  - [ ] MP3 files served with correct MIME type
  - [ ] Feed validates in podcast clients
  - [ ] New episodes appear in feed within 1 minute of generation
- **Estimate:** Small
- **Dependencies:** Story 1

### Story 3: Watch Playback Setup
- **Description:** Documentation for setting up podcast sync to Apple Watch
- **Acceptance Criteria:**
  - [ ] Clear instructions for subscribing on iPhone
  - [ ] Steps to sync to Watch
  - [ ] Troubleshooting guide for common issues
- **Estimate:** Small
- **Dependencies:** Story 2

### Story 4: Daily Notification
- **Description:** Rio sends Telegram notification when new episode is ready
- **Acceptance Criteria:**
  - [ ] Telegram message sent after episode generation
  - [ ] Message includes duration and focus areas
  - [ ] Link to podcast feed included
- **Estimate:** Small
- **Dependencies:** Story 1

### Suggested Order:
1. Story 1 (Audio Generation Pipeline) - Foundation
2. Story 2 (Podcast RSS Feed) - Depends on 1
3. Story 4 (Daily Notification) - Can parallelize with 2
4. Story 3 (Watch Playback Setup) - Documentation only