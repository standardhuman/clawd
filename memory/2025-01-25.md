# 2025-01-25

## Marine Service Platform Discussion (stashed) — IMPORTANT FOR SAILORSKILLS PRO REPLACEMENT

Brian outlined a vision for scaling the "Howard experience" to other marine service providers. This could potentially **replace the SailorSkills Pro stack**.

### Core Concept
Voice-first data capture → Supabase → Stripe invoicing → customer portal

### Architecture
- **Supabase** as multi-tenant data layer (providers, customers, boats, service_logs, invoices)
- **Stripe Connect** for multi-provider payments (each diver gets own connected account)
- **Telegram** (or similar) as primary UI with inline approval buttons
- **Scoped "Howard-like" agents** for each provider (limited tool access — just Supabase, Stripe, email)
- **Voice → Whisper transcription → LLM structured extraction**

### The Flow
1. Diver finishes job, records voice note (Telegram voice message or Wispr Flow)
2. Voice → Whisper API transcription
3. Transcription → LLM extracts structured data (boat name, services, duration, notes)
4. Fuzzy match boat in Supabase
5. Calculate price from service_types table
6. Generate invoice preview → send to Telegram with inline buttons
7. Provider approves → Stripe charges customer (card on file) or sends invoice
8. Confirmation email to customer with service details
9. Customer portal (React/Vite on SailorSkills Marketplace) auto-updates from Supabase

### Supabase Schema (drafted)
Tables: `providers`, `customers`, `boats`, `service_types`, `service_logs`, `invoices`
- Row-level security for multi-tenant isolation
- JSONB for flexible services/line_items

### Key Decisions Pending
- Customer payment capture: When do cards get added?
- Scheduling: Calendly-style or manage availability in Supabase?
- The approval step: Inline Telegram buttons ("✅ Charge $85" / "✏️ Edit")

### Next Steps (when resumed)
1. Spin up Supabase project
2. Stripe Connect setup (platform account + onboard Brian as first provider)
3. Telegram bot (could be existing Clawdbot or dedicated)
4. Voice flow prototype (transcription → extraction → approval loop)

---

## Emily Richards Media Project

Implemented Emily's V1 feedback:
- Removed hero section (page opens directly to videos)
- Removed "Selected Work" heading
- Updated contact to "Looking for a Producer?" / "I'd love to connect"
- Added full video controls (play/pause, scrubbable progress bar, volume, mute)
- Disabled closed captions from HLS streams

Created version tracking feedback page at `/feedback`:
- Progress timeline showing V1 → V2 → V3 → Final
- Links to both V1 and V2 deployments
- V1 feedback displayed with V2 changes checklist
- V2 feedback form ready for next round

Live: https://emilyrichards-media.briancline.co

---

## Clawdbot Security Audit

Performed full security audit against Clawdbot docs. Findings:

**Good:**
- Gateway loopback-only, token auth enabled
- DM pairing + group allowlist on all channels
- Strong model (Opus 4.5)
- No browser control configured

**Fixed:**
- Tightened file permissions on ~/.clawdbot (dirs → 700, files → 600)

**Recommendations for future:**
- Consider enabling sandbox mode for non-main sessions
- Add `logging.redactSensitive: "tools"` to config
