# 2026-01-27

## SailorSkills Architecture Session

### Accomplished Today

1. **Committed coherence updates** — `e4ab9d8` pushed with fully aligned ecosystem diagram + implementation roadmap

2. **Symlinked Obsidian → Git** — `SailorSkills/Architecture` now points to `~/AI/business/sailorskills/docs/architecture/`. Edits in either place hit same files.

3. **Audited Pro app vs ecosystem diagram:**
   - Core is solid: auth, voice recording, extraction, service logs, anodes
   - Gaps: invoice trigger on approval, notifications, BOATY, order flow, portal

4. **Created service-data-definitions.md** — Concrete definitions for all enums:
   - Growth levels: none, minimal, moderate, heavy (+50%), severe (+100%)
   - Paint conditions: excellent, good, fair, poor, missing
   - Anode percentages: 0-100 with thresholds
   - Pulled real definitions from sailorskills.com/diving
   - Added multi-provider schema for `provider_services` table

5. **Found existing pricing logic** — `sailorskills-estimator/configuration.js`:
   - Already dynamic (loads from `business_pricing_config` table)
   - Needs migration to per-provider `provider_services` for multi-diver support

### Where We Left Off

**Next steps:**
1. Update Gemini extraction prompt to match new schema definitions
2. Test Pro app reliability on physical device
3. Build `provider_services` table (Phase 1.3)
4. Schema alignment: ensure service_log output matches portal display needs

### Key Files

- `/Users/brian/AI/business/sailorskills/docs/architecture/service-data-definitions.md` — New definitions doc
- `/Users/brian/AI/business/sailorskills/docs/architecture/ecosystem-diagram.md` — Master architecture
- `/Users/brian/AI/business/sailorskills/docs/architecture/implementation-roadmap.md` — Phased plan
- `/Users/brian/AI/business/sailorskills/pro/supabase/functions/process-voice/index.ts` — Extraction prompt to update

### Brian's Key Insight

"The ecosystem diagram is the first time I've ever had a complete system diagram. This feels like a really powerful position to be starting from."

The model's job: take natural diver speech → interpret intelligently → produce clean, normalized data optimized for portal display and longitudinal tracking. Definitions must be concrete because they're billing triggers.
