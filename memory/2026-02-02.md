# 2026-02-02 - Sunday

## Billing Automation Project

**Goal:** Automate monthly billing for SailorSkills hull cleaning services.

### Workflow (current manual process):
1. Open Notion → check each boat's Conditions database for recent service
2. Go to Stripe → create charge based on boat type, length, growth level, anodes replaced
3. If payment method on file → charge + send receipt
4. If no payment method → send invoice

### What We Mapped:
- **Notion structure:** Client List → {Boat} Service Log (child page) → {Boat} Conditions (database)
- **Conditions fields:** Date, Growth (multi-select), Anodes (multi-select), Installed (number), Notes
- **Pricing in Supabase:** business_pricing_config table has growth surcharges (Heavy=50%, Severe=100%), anode markup (50% + $15 labor)
- **Anodes catalog:** anodes_catalog table has ~1000+ anodes with list_price and sale_price

### Issue Found:
- Notion search API only returns 61 of ~100+ Conditions databases
- Deeply nested databases (inside Service Log pages) aren't indexed by search
- Need to crawl boat pages directly to find all Conditions databases

### January 2026 Services Found (28 of ~55):
- 5 with anode replacements (The Circus Police, Halo, Innamorata, Phoenix, Omega)
- 13 with heavy growth surcharge candidates
- 3 powerboats (extra 25% surcharge)

### Next Session:
- Build proper database crawler (boat page → Service Log → Conditions)
- Get Stripe access (CLI login or API key)
- Design charging workflow

## Technical Notes

- Notion API has control character issues - use `tr -d '\000-\037'` to clean responses
- Supabase archived project: `fzygakldvvzxmahkdylq.supabase.co`
- Notion API version: `2022-06-28` (not 2025)
