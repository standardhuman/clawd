# 2026-02-16 (Monday)

## Healthcheck — Security Hardening

Ran full healthcheck on Mac mini (macOS 26.2, Apple Silicon).

### Findings
- FileVault OFF — intentional, Brian needs remote boot access
- macOS firewall was disabled
- Tailscale Funnel was exposing gateway publicly
- Control UI had insecure auth + device auth disabled
- Anthropic OAuth token stored in plaintext in `openclaw.json`
- OpenClaw config had stale key (`gateway.controlUi.allowedOrigins`)
- OpenClaw update available: 2026.2.15

### Actions Taken
- **`openclaw doctor --fix`** — removed stale `allowedOrigins` key
- **Tailscale: funnel → serve** — gateway now tailnet-only, not public internet
- **Control UI hardened** — `allowInsecureAuth: false`, `dangerouslyDisableDeviceAuth: false`
- **Anthropic OAuth token moved to 1Password injection:**
  - Created `~/.openclaw/gateway-start.sh` wrapper using `op run --env-file`
  - Created `~/.openclaw/gateway.env` with `op://Personal/Anthropic Claude Code OAuth Token/credential`
  - Updated launchd plist (`ai.openclaw.gateway.plist`) to use wrapper script
  - Removed `ANTHROPIC_API_KEY` from `openclaw.json`
  - Token never touches disk — injected at runtime by 1Password CLI
  - After reboot: 1Password app must be unlocked for gateway to start (KeepAlive retries)
- **Confirmed Brian is using OAuth token** (`sk-ant-oat01-...`), not API key — this is intentional

## Agent Pipeline Activation

Discovered that the Feb 15 hackathon work (9 sub-agent personas, org chart, Pillars doc) was already built but not logged to memory. Found:
- 9 persona files in `~/clawd/agents/` (Noa, Kai, Reese, Blake, Quinn, Sage, Milo, Avery, Cyrus)
- Noa has 40+ curated source list (`SOURCES.md`)
- Cron jobs for Noa (midnight research) and Kai (6:30am pitch) already existed and running
- Noa produced real research reports (Feb 15, Feb 16) with web_search/web_fetch
- Kai's 6:30am delivery wasn't reaching Brian — fixed prompt to be more explicit about output
- Test-drove Kai manually: produced solid pitch about using an academic hull-cleaning ROI paper as a sales asset
- Reports at `~/clawd/reports/YYYY-MM-DD-{research,pitch}.md`

### Mission Control Self-Hosted
- Built Node.js static server + WebSocket proxy at `~/clawd/projects/mission-control/serve.mjs`
- Serves on port 18790, proxies WebSocket to gateway on 18789
- Auth token injected server-side — never in browser bundle
- Tailscale Serve on port 8443: `https://brians-mac-mini.taile67de1.ts.net:8443/`
- Launchd service: `ai.openclaw.mission-control`
- Fixed origin rejection by setting `Origin: http://localhost:18789` on proxy→gateway WebSocket
- Had to re-enable `dangerouslyDisableDeviceAuth` — safe since gateway is tailnet-only
- Removed tokens from production JS bundle (cleared `.env.production`)

### Agent Spawn System
- Howard can spawn any sub-agent via `sessions_spawn` with persona file as context
- Pattern: "Read ~/clawd/agents/{name}/PERSONA.md then {task}"
- Documented in `~/clawd/agents/README.md`
- On-demand agents: Blake, Quinn, Sage, Milo, Reese, Avery, Cyrus

### Still TODO (Brian)
- Run `sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on` (macOS firewall)
- Launchd plist change takes effect on next service reload/reboot
- OpenClaw update to 2026.2.15 available but not applied
- Gateway password still in config (lower priority — could move to env var)
- Other API keys (DeepSeek, NVIDIA, Gemini, Brave) still in config plaintext
