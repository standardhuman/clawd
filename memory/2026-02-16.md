# 2026-02-16 (Monday)

## Healthcheck — Security Hardening

Ran full healthcheck on Mac mini (macOS 26.2, Apple Silicon).

### Findings
- FileVault OFF — intentional, Brian needs remote boot access
- macOS firewall was disabled
- Tailscale Funnel was exposing gateway publicly
- Control UI had insecure auth + device auth disabled
- Anthropic OAuth token stored in plaintext in `openclaw.json`
- OpenClaw config had stale key (`gateway.controlUi.allowedOrigins`)
- OpenClaw update available: 2026.2.15

### Actions Taken
- **`openclaw doctor --fix`** — removed stale `allowedOrigins` key
- **Tailscale: funnel → serve** — gateway now tailnet-only, not public internet
- **Control UI hardened** — `allowInsecureAuth: false`, `dangerouslyDisableDeviceAuth: false`
- **Anthropic OAuth token moved to 1Password injection:**
  - Created `~/.openclaw/gateway-start.sh` wrapper using `op run --env-file`
  - Created `~/.openclaw/gateway.env` with `op://Personal/Anthropic Claude Code OAuth Token/credential`
  - Updated launchd plist (`ai.openclaw.gateway.plist`) to use wrapper script
  - Removed `ANTHROPIC_API_KEY` from `openclaw.json`
  - Token never touches disk — injected at runtime by 1Password CLI
  - After reboot: 1Password app must be unlocked for gateway to start (KeepAlive retries)
- **Confirmed Brian is using OAuth token** (`sk-ant-oat01-...`), not API key — this is intentional

### Still TODO (Brian)
- Run `sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on` (macOS firewall)
- Launchd plist change takes effect on next service reload/reboot
- OpenClaw update to 2026.2.15 available but not applied
- Gateway password still in config (lower priority — could move to env var)
- Other API keys (DeepSeek, NVIDIA, Gemini, Brave) still in config plaintext
